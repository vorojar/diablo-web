# 暗黑破坏神 Web版 (Diablo Web Remake)

这是一个基于 HTML5 Canvas 和原生 JavaScript 开发的动作角色扮演游戏 (ARPG)，致敬经典的《暗黑破坏神2》。游戏实现了核心的 ARPG 体验，包括随机地牢、装备系统、技能树、任务系统以及实时战斗。

## 🎮 游戏特色

### 核心玩法
- **随机地牢**: 采用 Roguelike 元素的随机地图生成算法，每次进入地牢都是全新的体验。
- **实时战斗**: 流畅的动作战斗系统，支持近战攻击和多种魔法技能。
- **城镇枢纽**: 经典的“罗格营地”作为安全区，包含商人、治疗者和任务 NPC。

### 角色成长
- **属性系统**: 升级获得属性点，可自由分配到力量、敏捷、体力、精力。
- **技能树**: 
  - 🔥 **火球术 (Q)**: 发射高伤害的火球。
  - ❄️ **冰霜新星 (W)**: 冻结周围敌人，提供控场能力。
  - 🏹 **多重射击 (E)**: 发射扇形箭矢，适合群体攻击。
- **等级系统**: 击杀怪物获得经验值，最高等级无上限（软上限取决于怪物经验）。

### 物品与装备
- **装备系统**: 包含头盔、护甲、武器、盾牌/副手、手套、腰带、鞋子、戒指、项链等多个部位。
- **词缀系统**: 装备分为普通(白)、魔法(蓝)、稀有(黄)、暗金(金)四个品质。魔法及以上装备拥有随机词缀（如“残忍的”、“之熊”等），提供额外的属性加成。
- **物品栏**: 经典的网格背包系统（30格），支持物品拖拽、装备和使用。
- **仓库系统**: 私人仓库（36格），可在罗格营地找瓦瑞夫存取物品，与背包互通。
- **腰带系统**: 快捷使用药水和回城卷轴。
- **赌博与商店**: 可以在基格处购买基础物资，或花费金币进行装备赌博。

### 任务系统
- 包含 **10 个章节任务**，从“邪恶洞窟”到“世界之石要塞”。
- 每个任务都有特定的完成条件（如击杀特定 Boss 或清理怪物）和丰厚的奖励（技能点、金币、稀有装备、暗金装备、传奇装备）。
- 任务难度随层数增加，后期任务奖励更珍贵。

### 其他功能
- **自动存档**: 游戏利用 IndexedDB 自动保存角色状态、装备和任务进度。
- **小地图**: 实时显示已探索区域、敌人位置和出入口。
- **音效系统**: 包含背景音乐和战斗音效（支持开关）。
- **怪物刷新**: 击杀怪物后系统会自动刷新新的怪物，确保地牢始终有挑战。
- **深度难度**: 地牢层数越深，怪物血量和强度越高，提供持续挑战。
- **BOSS掉落**: BOSS和任务怪物掉落更丰厚的奖励，包括多倍金币和2-5件高品质装备。

## 🕹️ 操作指南

### 键盘控制
| 按键 | 功能 |
| --- | --- |
| `Q` | 释放 火球术 |
| `W` | 释放 冰霜新星 |
| `E` | 释放 多重射击 |
| `1` | 使用腰带第1格物品 (治疗药剂) |
| `2` | 使用腰带第2格物品 (法力药剂) |
| `3` | 使用腰带第3格物品 (回城卷轴) |
| `C` | 打开/关闭 角色属性面板 |
| `I` / `B` | 打开/关闭 物品栏 |
| `T` | 打开/关闭 技能树 |
| `J` | 打开/关闭 任务日志 |
| `Enter` | 交互 (进入地牢/传送门/下一层) |
| `Alt` | 显示地面物品标签 (点击标签拾取) |

### 鼠标控制
- **左键点击地面**: 移动角色。
- **左键点击敌人**: 攻击敌人 (按住可持续攻击)。
- **左键点击 NPC**: 对话/交易（基格=商店，阿卡拉=任务/治疗，瓦瑞夫=仓库）。
- **右键点击**: 释放当前选中的技能。
- **物品操作**:
  - 左键点击背包物品：使用或装备（打开仓库时左键=存入仓库）
  - 右键点击背包物品：丢弃物品（仅在非罗格营地）
  - 点击地面掉落物标签：拾取物品
- **技能提示**:
  - 法力不足时会提示需要多少法力
  - 选择未学习的技能时会提示"技能未学习"

## 🛠️ 技术栈

- **前端核心**: HTML5 Canvas API (用于渲染游戏画面和小地图)
- **逻辑实现**: Vanilla JavaScript (ES6+), 无任何第三方库依赖
- **数据存储**: IndexedDB (浏览器本地数据库)
- **样式布局**: CSS3 (Flexbox/Grid 用于 UI 界面)

## 📂 项目结构

```
/
├── index.html      # 游戏主入口，包含所有 HTML 结构、CSS 样式和 JS 逻辑
├── bg.mp3          # 背景音乐文件
└── README.md       # 项目说明文档
```

## 🚀 快速开始

1. **克隆或下载**本项目到本地。
2. 确保目录下有 `bg.mp3` 文件（如果需要背景音乐）。
3. 直接使用现代浏览器（Chrome, Firefox, Edge 等）打开 `index.html` 文件。
4. 点击“踏入庇护所”开始游戏！

> **注意**: 由于使用了 IndexedDB 和部分 ES6 特性，请确保使用最新版本的浏览器。

## 📝 开发日志

- **v1.0**: 基础引擎完成，实现地图生成、移动和碰撞检测。
- **v1.1**: 加入战斗系统、怪物 AI 和掉落系统。
- **v1.2**: 完善 UI，加入物品栏、装备栏和属性面板。
- **v1.3**: 实现任务系统和 NPC 交互。
- **v1.4**: 加入音效系统和存档功能。
- **v1.5**: 新增仓库系统（瓦瑞夫）、右键丢弃物品、技能施放提示、怪物血量随深度增加、BOSS掉落优化、任务数量扩展至10个。

---
*Stay awhile and listen...*
